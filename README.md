ğŸ“¦ ĞšÑƒÑ€ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚: Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ°Ğ»Ğ»Ğ¾ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸  
FreeList Allocator Ğ¸ Power-of-Two Allocator


## ğŸ‘¤ ĞĞ²Ñ‚Ğ¾Ñ€ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

![author photo](trash_png/founder_druzhinin.png-2.png)

**Ğ”Ğ°Ğ½Ğ¸Ğ» Ğ”Ñ€ÑƒĞ¶Ğ¸Ğ½Ğ¸Ğ½**  
ĞÑĞ½Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Â«ĞĞ»Ğ»Ğ¾ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹Â» (2025)  
C++ Developer


ğŸ§  ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
Ğ­Ñ‚Ğ¾Ñ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¿Ğ¾ÑĞ²ÑÑ‰Ñ‘Ğ½ Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ²ÑƒÑ… Ğ°Ğ»Ğ»Ğ¾ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸:

1) ğŸŸ¦ FreeList Allocator â€” ĞºĞ»Ğ°ÑÑĞ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ°Ğ»Ğ»Ğ¾ĞºĞ°Ñ‚Ğ¾Ñ€ ÑĞ¾ ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ñ‹Ğ¼ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼  
2) ğŸŸ© Power-of-Two Allocator â€” Ğ²Ñ‹Ğ´ĞµĞ»ÑĞµÑ‚ Ğ±Ğ»Ğ¾ĞºĞ¸ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚ĞµĞ¿ĞµĞ½ĞµĞ¹ Ğ´Ğ²Ğ¾Ğ¹ĞºĞ¸  

Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚:
â€¢ ğŸ”§ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ´Ğ²ÑƒÑ… Ğ°Ğ»Ğ»Ğ¾ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²  
â€¢ ğŸ§ª ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğµ Ñ‚ĞµÑÑ‚Ñ‹ (GoogleTest)  
â€¢ â–¶ï¸ Ğ´ĞµĞ¼Ğ¾-Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñƒ  
â€¢ ğŸš€ Ğ±ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€Ğº Ñ 13 Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ°Ğ¼Ğ¸  
â€¢ ğŸ“Š Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² (PNG-Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸)  
â€¢ ğŸ“ˆ ÑÑ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·  


## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
cp_var19/
â”œâ”€â”€ graphs/
â”‚   â”œâ”€â”€ malloc_latency.png
â”‚   â”œâ”€â”€ free_latency.png
â”‚   â”œâ”€â”€ internal_frag.png
â”‚   â”œâ”€â”€ external_frag.png
â”‚   â””â”€â”€ allocator_metrics_table.png
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ allocator_common.h
â”‚   â”œâ”€â”€ freelist_allocator.h
â”‚   â””â”€â”€ pow2_allocator.h
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ allocator_common.cpp
â”‚   â”œâ”€â”€ freelist_allocator.cpp
â”‚   â”œâ”€â”€ pow2_allocator.cpp
â”‚   â”œâ”€â”€ demo_main.cpp
â”‚   â””â”€â”€ benchmark.cpp
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ gtest_allocators.cpp
â”œâ”€â”€ CMakeLists.txt
â””â”€â”€ README.md
```

ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ GoogleTest.

## â–¶ï¸ Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ²

```bash
mkdir build
cd build
cmake ..
make -j4
./allocator_tests
```


ğŸš€ Ğ‘ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€Ğº
Ğ‘ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€Ğº Ğ¸Ğ·Ğ¼ĞµÑ€ÑĞµÑ‚ 13 ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº:

â€¢ âš¡ avg malloc/free latency â€” ÑÑ€ĞµĞ´Ğ½ÑÑ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ°  
â€¢ ğŸ¯ p50 â€” Ğ¼ĞµĞ´Ğ¸Ğ°Ğ½Ğ½Ğ°Ñ Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ°  
â€¢ ğŸ“ˆ p95 â€” Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° 95-Ğ³Ğ¾ Ğ¿ĞµÑ€Ñ†ĞµĞ½Ñ‚Ğ¸Ğ»Ñ  
â€¢ ğŸš¨ p99 â€” Ğ·Ğ°Ğ´ĞµÑ€Ğ¶ĞºĞ° 99-Ğ³Ğ¾ Ğ¿ĞµÑ€Ñ†ĞµĞ½Ñ‚Ğ¸Ğ»Ñ  
â€¢ ğŸ” jitter (p99 âˆ’ p50)  
â€¢ âœ‚ï¸ split count â€” ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğ¹  
â€¢ ğŸ©¹ merge count â€” ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ»Ğ¸ÑĞ½Ğ¸Ğ¹  
â€¢ ğŸ§± internal fragmentation  
â€¢ ğŸ§© external fragmentation  
â€¢ ğŸ— max free block  
â€¢ ğŸ“Š peak allocated  
â€¢ âŒ allocation failures  
â€¢ âš ï¸ free failures  

## â–¶ï¸ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ±ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€ĞºĞ°

```bash
cd build
./benchmark
```


ğŸ“Š Ğ“Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°

â€¢ malloc_latency.png
![malloc latency horizontal](trash_png/malloc_latency_us_horizontal.png)
â€¢ free_latency.png
![free latency horizontal](trash_png/free_latency_us_horizontal.png)
â€¢ internal_frag.png  
![internal frag (bytes)](trash_png/internal_frag_bytes_horizontal.png)
â€¢ external_frag.png  
![external frag percent](trash_png/external_frag_percent_horizontal.png)
â€¢ allocator_metrics_table.png  
![metrics table](trash_png/allocator_metrics_table.png)


## ğŸ›  Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```bash
mkdir build
cd build
cmake ..
make -j4
```


ğŸ¯ Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾
â€¢ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¾ Ğ½Ğ° C++17  
â€¢ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ Ñ Linux/macOS  
â€¢ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ CMake-ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ  
â€¢ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ±ĞµĞ½Ñ‡Ğ¼Ğ°Ñ€ĞºĞ¾Ğ² Ğ²Ğ¾ÑĞ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ğ¼Ñ‹  